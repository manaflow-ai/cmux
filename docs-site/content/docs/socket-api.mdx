---
title: Socket API
description: Unix socket API for programmatic control of cmuxterm
---

# Socket API

cmuxterm exposes a Unix socket for programmatic control, enabling automation and integration with tools like Claude Code.

## Hierarchy

cmuxterm uses a four-level hierarchy:

| Level | Description |
|-------|-------------|
| **Workspace** | A sidebar tab containing split panes |
| **Pane** | A split region within a workspace |
| **Surface** | A nested tab within a pane |
| **Panel** | The actual content (terminal or browser) |

## Socket Location

| Build | Socket Path |
|-------|-------------|
| Release | `/tmp/cmuxterm.sock` |
| Debug | `/tmp/cmuxterm-debug.sock` |

You can override the path with the `CMUX_SOCKET_PATH` environment variable.

## Access Modes

cmuxterm has three access modes, configurable in Settings:

| Mode | Description |
|------|-------------|
| **Off** | Socket disabled |
| **Notifications only** | Only notification commands allowed |
| **Full control** | All commands enabled |

<Callout type="warn">
  On shared machines, use "Notifications only" mode to prevent other users from controlling your terminals.
</Callout>

## Protocol

Commands are sent as newline-terminated text:

```
command_name [args]\n
```

Responses are newline-terminated text:

```
OK [data]
ERROR: [message]
```

## Commands Reference

### Workspace Management

#### list_workspaces

List all open workspaces.

```
list_workspaces
```

#### new_workspace

Create a new workspace.

```
new_workspace
```

Response: `OK <workspace-id>`

#### select_workspace

Switch to a specific workspace.

```
select_workspace <workspace-id|index>
```

#### current_workspace

Get the currently active workspace.

```
current_workspace
```

Response: `<workspace-id>`

#### close_workspace

Close a specific workspace.

```
close_workspace <workspace-id>
```

### Split Management

#### new_split

Create a new split pane.

```
new_split <left|right|up|down>
```

#### list_surfaces

List all surfaces in the current workspace.

```
list_surfaces [workspace-id]
```

#### focus_surface

Focus a specific surface.

```
focus_surface <surface-id|index>
```

#### close_surface

Close a surface (collapse split).

```
close_surface [surface-id|index]
```

### Pane Management

#### list_panes

List all panes in the current workspace.

```
list_panes
```

#### focus_pane

Focus a specific pane.

```
focus_pane <pane-id|index>
```

#### list_pane_surfaces

List surfaces (nested tabs) in a pane.

```
list_pane_surfaces [--pane=<pane-id|index>]
```

#### new_surface

Create a new surface in a pane.

```
new_surface [--pane=<pane-id|index>] [--type=<terminal|browser>] [--url=<url>]
```

Response: `OK <surface-id>`

#### new_pane

Create a new pane (split).

```
new_pane --direction=<left|right|up|down> [--type=<terminal|browser>] [--url=<url>]
```

Response: `OK <surface-id>`

### Input Control

#### send

Send text input to a terminal.

```
send <text>
```

#### send_key

Send a key press.

```
send_key <key>
```

Key options: `ctrl-c`, `ctrl-d`, `ctrl-z`, `enter`, `tab`, `escape`, `backspace`

#### send_surface

Send text to a specific surface.

```
send_surface <surface-id|index> <text>
```

#### send_key_surface

Send a key press to a specific surface.

```
send_key_surface <surface-id|index> <key>
```

### Notifications

#### notify

Send a notification to the focused surface.

```
notify <title>
notify <title>|<subtitle>|<body>
```

#### notify_surface

Send a notification to a specific surface.

```
notify_surface <surface-id|index> <title>|<subtitle>|<body>
```

#### list_notifications

List all notifications.

```
list_notifications
```

#### clear_notifications

Clear all notifications.

```
clear_notifications
```

### App Control

#### ping

Check if the socket is responsive.

```
ping
```

Response: `PONG`

#### set_app_focus

Simulate app focus/unfocus (for testing).

```
set_app_focus <active|inactive|clear>
```

## Example: Python Client

```python
from cmux import cmux

with cmux() as client:
    # List workspaces
    workspaces = client.list_workspaces()
    print(workspaces)

    # Create workspace and split
    client.new_workspace()
    client.new_split("right")

    # Send notification
    client.notify("Hello", body="From Python!")
```

## Example: Shell Script

```bash
#!/bin/bash

# Function to send commands
cmux_cmd() {
    echo "$1" | nc -U /tmp/cmuxterm.sock
}

# List workspaces
cmux_cmd 'list_workspaces'

# Send notification
cmux_cmd 'notify Done|Build|Task complete'
```
